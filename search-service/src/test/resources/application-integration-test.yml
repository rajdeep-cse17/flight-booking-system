spring:
  profiles: integration-test
  application:
    name: search-service
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
  cloud:
    aws:
      credentials:
        instance-profile: false
        use-default-aws-credentials-chain: false
      region:
        static: us-east-1
      stack:
        auto: false

server:
  port: 8080

# AWS Configuration for Local Testing
aws:
  access:
    key:
      id: ${AWS_ACCESS_KEY_ID:local}
  secret:
    access:
      key: ${AWS_SECRET_ACCESS_KEY:local}
  region: ${AWS_DEFAULT_REGION:us-east-1}
  dynamodb:
    endpoint: ${DYNAMODB_ENDPOINT:http://localhost:8000}

# Logging for Integration Tests
logging:
  level:
    com.flightbooking: DEBUG
    com.amazonaws: DEBUG
    org.springframework.data.redis: DEBUG
    org.springframework.web: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

# Actuator for Health Checks
management:
  endpoints:
    web:
      exposure:
        include: health,info
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      show-components: always
  health:
    redis:
      enabled: true
    db:
      enabled: true 